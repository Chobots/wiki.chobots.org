{% extends "base.html" %}

{# Include our custom stylesheet #}
{% block extrahead %}
  {{ super() }}
  <link rel="stylesheet" href="{{ 'css/chobots.css' | url }}">
{% endblock %}

{# Custom header with logo and navigation #}
{% block header %}
<header class="chobots-header">
  <div class="chobots-container">
    <nav class="site-nav" aria-label="Main navigation">
      <!-- Table of Contents -->
        <div id="toc-collapse">
          {{ toc }}
        </div>
      <button class="nav-toggle" aria-expanded="false" aria-label="Menu">
        ☰
      </button>
      <ul>
        {% for item in nav %}
        <li><a href="{{ item.url }}">{{ item.title }}</a></li>
        {% endfor %}
      </ul>
    </nav>
  </div>
</header>
{% endblock %}

{# Wrap the built-in content in our layout container #}
{% block content %}
  <div class="content-wrapper">
    {{ super() }}
  </div>
{% endblock %}


{# Custom footer with attribution #}
{% block footer %}
<footer class="chobots-footer">
  <a class="logo">
    <img class="logo" src="{{ 'img/logo-chobotsarchiveorganization.svg' | url }}" alt="Chobots Archive logo">
  </a>  
  <p>Copyright © 2025 Chobots Archive Organization | Contains content Copyright © 2007–2011 Vayersoft LLC</p>
  <p>Documentation built with <a rel="noreferrer noopener" href="https://www.mkdocs.org/">MkDocs</a></p>
</footer>
{% endblock %}

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const toc = document.getElementById("toc-collapse");
    if (!toc) return;

    let lastScrollTop = 0;
    let fadeTimeout;

    function fadeOutTOC() {
      toc.classList.add("hidden");
    }

    function fadeInTOC() {
      toc.classList.remove("hidden");
      clearTimeout(fadeTimeout);
      fadeTimeout = setTimeout(fadeOutTOC, 3000);
    }

    window.addEventListener("scroll", () => {
      fadeInTOC();
      lastScrollTop = window.scrollY || document.documentElement.scrollTop;
    });

    toc.addEventListener("mouseenter", () => toc.classList.remove("hidden"));
    toc.addEventListener("mouseleave", () => fadeTimeout = setTimeout(fadeOutTOC, 3000));

    // Initial fade-out after load
    setTimeout(fadeOutTOC, 4000);
  });
</script>